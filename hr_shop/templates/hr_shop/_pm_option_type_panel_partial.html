{# hr_shop/templates/_pm_option_type_panel_partial.html #}

<div class="pm-option-type-header">

    <form hx-post="{% url 'hr_shop:update_option_type' pk=option_type.pk %}" hx-target="#pm-option-type-panel" hx-swap="innerHTML" class="pm-option-type-edit-form">
        <div>
            <label for="option-name">Name</label>
            <input type="text" name="option-name" id="option-name" value="{{ option_type.name }}">
        </div>
        <div>
            <label for="option-code">Code</label>
            <input type="text" name="option-code" id="option-code" value="{{ option_type.code }}">
        </div>
        <div>
            <label for="option-position">Position</label>
            <input type="number" name="option-position" id="option-position" value="{{ option_type.position }}">
        </div>
        <button type="submit">Save Option Type</button>
    </form>

    <form hx-post="{% url 'hr_shop:delete_option_type' pk=option_type.pk %}" hx-target="#pm-product-panel" hx-swap="innerHTML" class="pm-option-type-delete-form">
        <button type="submit">Delete Option Type</button>
    </form>
</div>

<div class="pm-option-values">
    <h4>Option Values</h4>
    <table class="pm-option-value-table">
        <thead>
        <tr>
            <th>Name</th>
            <th>Code</th>
            <th>Position</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for val in values %}
            <tr>
                <td>{{ val.name }}</td>
                <td>{{ val.code }}</td>
                <td>{{ val.position }}</td>
                <td>
                    <form hx-post="{% url 'hr_shop:option_value_delete' pk=val.pk %}" hx-target="#pm-option-type-panel" hx-swap="innerHTML" style="display:inline;">
                        <button type="submit" class="pm-small-button">Delete</button>
                    </form>
                </td>
            </tr>
        {% empty %}
            <tr><td colspan="4">No values yet.</td></tr>
        {% endfor %}
        </tbody>
    </table>

    <h5>Add Value</h5>
    <form hx-post="{% url 'hr_shop:option_value_create' option_type_pk=option_type.pk %}" hx-target="#pm-option-type-panel" hx-swap="innerHTML" class="pm-option-value-create-form">
        {{ value_form.non_field_errors }}
        <div>{{ value_form.name.label_tag }} {{ value_form.name }}</div>
        <div>{{ value_form.code.label_tag }} {{ value_form.code }}</div>
        <div>{{ value_form.position.label_tag }} {{ value_form.position }}</div>
        <button type="submit">Add Value</button>
    </form>

</div>
