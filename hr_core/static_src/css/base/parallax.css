/* hr_core/static_src/css/base/parallax.css */


/* ===========================
   Parallax layout + behavior
   =========================== */

#parallax-wrapper {
    position:    relative;
    align-items: center;
    text-align:  center;
}

.parallax-section {
    position:   relative;
    overflow:   hidden;
    height:     auto;
    min-height: 100svh;
    padding:    0;
}

.parallax-background {
    will-change:         transform;
    position:            absolute;
    top:                 0;
    left:                0;
    transform:           translate3d(0, 0, 0);
    width:               100%;
    min-height:          100svh;
    background-position: center;
    background-size:     cover;
}

#parallax-section-bulletin.parallax-sticky-bg {
    background: linear-gradient(135deg, #000 0%, #0A0A0A 60%, #0F1115);
    position:   relative;
    min-height: 100svh;
    height:     auto;
}

/* The bounded "stage" that sticks at the top */
/*noinspection CssInvalidFunction*/
#parallax-section-bulletin.parallax-sticky-bg .parallax-background {
    position:     sticky;
    top:          0;
    width:        100%;
    height:       var(--bulletin-stage-h, 100svh);
    min-height:   var(--bulletin-stage-h, 100svh);
    inset-inline: 0;
    z-index:      0;
    transform:    translate3d(0, 0, 0);
    will-change:  transform;
}

/* Fade the bottom of the stage into black so the "end" is smooth */
#parallax-section-bulletin.parallax-sticky-bg .parallax-background::after {
    content:        "";
    position:       absolute;
    left:           0;
    right:          0;
    bottom:         0;
    height:         var(--bulletin-stage-fade);
    pointer-events: none;
    background:     linear-gradient(
                            to bottom,
                            rgba(0, 0, 0, 0) 0%,
                            rgba(0, 0, 0, 0.85) 70%,
                            rgba(0, 0, 0, 1) 100%
                    );
}

/* Pull the content up so it starts on top of the stage */
#parallax-section-bulletin.parallax-sticky-bg .parallax-content {
    position:   relative;
    z-index:    1;
    margin-top: calc(var(--bulletin-stage-h, calc(var(--svh) * 100)) * -1); /* IMPORTANT: overlap by stage height (set by JS) */
}

div.parallax-content p {
    position: relative !important;
    z-index:  10 !important;
    color:    var(--text) !important;
}

.section-wipe {
    pointer-events:      none;
    will-change:         transform;
    position:            absolute;
    z-index:             20;
    inset-inline:        0;
    transform:           translate3d(0, 0, 0);
    height:              60svh;
    min-height:          60svh;
    background-size:     cover;
    background-repeat:   no-repeat;
    background-position: 50% 50%;
}

#section-wipe-1::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAL0lEQVR42u3MMQEAAAgDIN8/9K3hHFQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPgG8oAAAUoH0xkAAAAASUVORK5CYII=");
    background-repeat: repeat;
    background-size: 64px 64px;

    opacity: 0.05;
    mix-blend-mode: overlay;
}

/* iOS non-Safari settle-based vh fix (avoid svh jitter on wipes). */
html.has-vh-fix .section-wipe {
    height:     calc(var(--vh) * 60);
    min-height: calc(var(--vh) * 60);
}

@supports (height: 1svh) {
    .parallax-background {
        min-height: 100svh;
    }

    .section-wipe {
        height:     60svh;
        min-height: 60svh;
    }
}

@supports not (height: 1svh) {
    .parallax-background {
        min-height: 100vh;
    }

    .section-wipe {
        height:     60vh;
        min-height: 60vh;
    }
}

/* ===========================
   Reduced motion fallback
   =========================== */

@media (prefers-reduced-motion: reduce) {
    .parallax-background,
    .section-wipe {
        transform:  none !important;
        transition: none !important;
        animation:  none !important;
    }
}
