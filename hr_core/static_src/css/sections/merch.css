/* hr_core/static_src/css/sections/merch.css */
/* ===========================
   Merch section wrapper
   =========================== */

.merch-section {
    --accent-neon:      #39FF14;
    --accent-neon-glow: rgba(57, 255, 20, 0.55);
}

.merch-grid {
    display:               grid;
    grid-template-columns: 1fr;
    gap:                   1rem;
    padding:               2rem 0;
    padding-inline:        clamp(16px, 6vw, 32px);
}

/* =======================================================================================================
   MERCH CARDS
   ======================================================================================================= */

.merch-card {
    padding:        1.5rem;
    border-radius:  0.75rem;
    color:          var(--text);
    background:     linear-gradient(
                            145deg,
                            rgba(14, 22, 16, 0.75),
                            rgba(4, 6, 8, 0.92)
                    );
    box-shadow:           0 0 2.00rem var(--black-alpha-75),
                          0 0 1.50rem rgba(0, 255, 180, 0.08),
                    inset 0 0 0.75rem rgba(0, 255, 120, 0.04);
    transition:     box-shadow .2s ease,
                    transform  .2s ease;
    display:        flex;
    flex-direction: column;
    max-height:     calc(var(--vh) * 80);
}

.merch-img {
    cursor:        pointer;
    position:      relative;
    overflow:      hidden;
    aspect-ratio:  1 / 1;
    width:         100%;
    border:        1px solid var(--white-alpha-15);
    border-radius: 0.75rem;
    background:    #111;
}

.merch-img img {
    width:      100%;
    height:     100%;
    object-fit: cover;
    transition: transform .2s ease;
}

.merch-img:hover img {
    transform: scale(1.0625);
}

.merch-img:focus-visible {
    border-radius: 0.75rem;
    outline:       2px solid var(--accent-neon);
    box-shadow:    0 0 0 0.25rem rgba(57, 255, 20, 0.25);
}

.merch-meta {
    display:        flex;
    flex-direction: column;
    align-items:    center;
    gap:            0.25rem;
    padding:        0.75rem 0.75rem 0;
    font-family:    "Megrim", cursive;
    font-size:      1.5rem;
}

.merch-title,
.modal-title,
.product-modal-price {
    font-family: "Megrim", cursive;
    color:       var(--glow);
    text-shadow: 0 0 0.5rem darkorange;
}

.merch-price {
    font-weight: 700;
    color:       #C6FFD0;
    text-shadow: 0 0 0.5rem rgba(57, 255, 20, 0.22);
}

.merch-actions {
    display:               grid;
    grid-template-columns: 1fr;
    gap:                   0.75rem;
    margin-top:            auto;
    padding-top:           0.75rem;
    padding-bottom:        0.75rem;
    text-align:            center;
}

/* =======================================================================================================
   MERCH GRID BREAKPOINTS
   ======================================================================================================= */

@media (min-width: 1024px) {
    .merch-grid {
        gap:                   0.75rem;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        padding-inline:        clamp(1.5rem, 6vw, 2rem);
    }
}

@media (min-width: 1280px) {
    .merch-grid {
        gap:            1.5rem;
        padding-inline: clamp(2rem, 6vw, 3rem);
    }

    .merch-meta {
        gap: 0.5rem;
    }
}

@media (min-width: 1440px) {
    .merch-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        padding-inline:        clamp(3rem, 6vw, 4rem);
    }
}

/* =======================================================================================================
   Merch modal â€“ expanded card
   ======================================================================================================= */

.merch-modal {
    display:               grid;
    grid-template-columns: minmax(0, 1.25fr) minmax(0, 1.75fr);
    gap:                   1.5rem;
    align-items:           flex-start;
    color:                 var(--text);
}

.merch-modal-media {
    display:         flex;
    align-items:     flex-start;
    justify-content: center;
}

.merch-modal .modal-image {
    display:       block;
    width:         100%;
    max-width:     20rem;
    border-radius: 0.75rem;
    border:        1px solid var(--white-alpha-15);
    background:    #111;
    box-shadow:          0 0 2.00rem var(--black-alpha-75),
                         0 0 1.50rem rgba(0, 255, 180, 0.12),
                   inset 0 0 0.75rem rgba(0, 255, 120, 0.06);
}

.merch-modal-body {
    display:        flex;
    flex-direction: column;
    gap:            0.75rem;
    text-align:     left;
}

/* =======================================================================================================
   PRODUCT MODAL
   ======================================================================================================= */

.modal-product {
    display:          flex;
    flex-direction:   column;
    gap:              1.5rem;
    color:            var(--text);
    background-color: transparent;
    border-radius:    0.75rem;
    padding:          0.75rem;
}

.modal-product-media {
    --pm-media:      clamp(12rem, 32cqw, 24rem);
    display:         flex;
    align-items:     center;
    justify-content: center;
    flex:            0 0 var(--pm-media);
    max-width:       var(--pm-media);
    margin-inline:   auto;
    min-width:       0;
}

.modal-product .modal-image {
    display:       block;
    width:         100%;
    max-width:     clamp(12rem, 32cqw, 22rem);
    height:        auto;
    aspect-ratio:  1 / 1;
    border-radius: 0.75rem;
    border:        1px solid var(--white-alpha-15);
    object-fit:    contain;
    background:    black;
    box-shadow:    0 0 1.5rem var(--black-alpha-75);
}

.modal-product-body {
    flex:           1;
    display:        flex;
    flex-direction: column;
    gap:            0.5rem;
    min-width:      0;
}

.modal-title {
    margin:    0;
    font-size: 1.75rem;
}

.product-modal-price {
    margin: 0;
    font-weight: 700;
    display: inline-block;
    padding: 0.5rem 1rem;
    border-radius: 14px;
    background: var(--black-alpha-75);
    backdrop-filter: blur(10px);
    box-shadow:
        0 0 12px rgb(var(--green) / 0.30),
        inset 0 0 8px var(--black-alpha-60);
    text-align: center;
    align-self: center;
    justify-self: stretch;
    font-size: 1.15rem;
}

.modal-product .modal-description {
    margin:      0.25rem 0 0.5rem;
    font-family: "Exo 2", sans-serif;
    font-size:   0.75rem;
    line-height: 1.5;
    color:       var(--muted-text);
}

.modal-variant-group {
    display:        flex;
    flex-direction: column;
    gap:            0.25rem;
    margin-top:     0.5rem;
}

.modal-variant-group label {
    font-family:    "Quantico", sans-serif;
    font-size:      0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color:          #A5B4FC;
}

.modal-select {
    padding:       0.25rem 0.5rem;
    border-radius: 0.5rem;
    border:        1px solid rgb(var(--gray1) / 0.7);
    background:    rgba(var(--dark1) / 0.9);
    color:         var(--muted-text);
    font-size:     1rem;
}

/* Actions */
.modal-buttons {
    display:    flex;
    flex-wrap:  nowrap;
    gap:        0.75rem;
    margin-top: 1.25rem;
}

.modal-buttons button {
    flex:       2;
    text-align: center;
}

/* View transition opt-out by default */
.merch-thumb-img,
.modal-image {
    view-transition-name: none;
}

.merch-thumb-img.is-active,
.modal-image.is-active {
    view-transition-name: product-image;
}

/* =======================================================================================================
   MODAL BREAKPOINTS (container-query driven)
   ======================================================================================================= */

/* Small modal */
@container modal (max-width: 419.98px) {
    .modal-product {
        padding: 0.25rem 0.5rem;
        gap:     1rem;
    }

    .modal-title {
        text-align: center;
    }

    .modal-product .modal-description {
        text-align: center;
    }

    .modal-variant-group {
        margin-top: 0.25rem;
    }

    .modal-select {
        font-size: 0.75rem;
        padding:   0.25rem 0.5rem;
    }

    .modal-buttons {
        flex-direction:  column;
        align-items:     stretch;
        justify-content: center;
        margin-top:      0.25rem;
    }

    .modal-buttons button {
        width: 100%;
    }

    .merch-modal {
        grid-template-columns: 1fr;
    }
}

/* Medium small */
@container modal (min-width: 420px) and (max-width: 599.98px) {
    .modal-product {
        padding: 0.25rem 0.5rem;
    }

    .modal-buttons {
        flex-direction: column;
        margin-top:     0.25rem;
    }
}

/* Small-medium */
@container modal (max-width: 767.98px) {
    .modal-title {
        font-size:  1.25rem;
        text-align: center;
    }

    .product-modal-price {
        font-size:   1.05rem;
        order:       -1;
        width:       100%;
        align-self:  auto;
    }
}

/* Medium */
@container modal (min-width: 768px) and (max-width: 1099.98px) {
    .modal-product {
        padding: 0 0.75rem 0.25rem;
    }

    .modal-title {
        font-size: 1.5rem;
    }

    .product-modal-price {
        font-size: 1rem;
    }

    .modal-select {
        font-size: 1rem;
        padding:   0.25rem 0.5rem;
    }

    .modal-buttons {
        flex-direction: column;
        margin-top:     0.25rem;
    }
}

/* Wide (grid actions) */
@container modal (min-width: 840px) and (max-width: 1099.98px) {
    .modal-buttons {
        display:               grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap:                   0.75rem;
        align-items:           center;
    }

    .product-modal-price {
        grid-column: 1 / -1;
        width:       100%;
    }

    .modal-buttons button {
        width:     100%;
        min-width: 0;
    }
}

/* =====================================================================================
   Viewport gate: keep product modal STACKED until >= 768px viewport width
   ===================================================================================== */

@container modal (max-width: 1099.98px) {
    .modal-product {
        flex-direction: column;
        align-items:    stretch;
    }

    .modal-product-media {
        align-self:    auto;
        margin-inline: auto;
    }
}


/* Largest modal: same as wide, allow the media to grow a bit more */
@container modal (min-width: 1100px) {
    .modal-product {
        flex-direction: row;
        align-items:    center;
    }

    .product-modal-price {
        order:      -1;
        width:      auto;
        align-self: center;
    }

    .modal-product-media {
        margin-inline: 0;
        max-width:     none;
        width:         auto;
        flex:          0 1 clamp(16rem, 28cqw, 24rem);
        align-self:    center;
    }

    .modal-buttons {
        display:        flex;
        flex-direction: row;
        flex-wrap:      wrap;
        gap:            1rem;
        margin-top:     0.5rem;
    }

    .modal-buttons button {
        flex:       1 1 0;
        text-align: center;
    }
}

/* =======================================================================================================
   VIEW TRANSITIONS
   ======================================================================================================= */

::view-transition-group(product-image) {
    z-index: 500;
}

::view-transition-image-pair(product-image) {
    isolation: isolate;
}

::view-transition-old(product-image) {
    animation: merch-thumb-fade-glow .2s ease-out forwards;
}

::view-transition-new(product-image) {
    animation: merch-modal-warp-in .5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* =======================================================================================================
   KEYFRAMES
   ======================================================================================================= */

@keyframes merch-thumb-fade-glow {
      0% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(0.97); }
}

@keyframes merch-modal-warp-in {
      0% { opacity: 0; transform: scale(0.88) rotate(0.6deg); }
     60% { opacity: 1; transform: scale(1.04) rotate(-0.2deg); }
    100% { opacity: 1; transform: scale(1); }
}

@media (prefers-reduced-motion: reduce) {
    ::view-transition-old(product-image),
    ::view-transition-new(product-image) {
        animation-duration: 0.01ms !important;
    }
}

#modal:not(.hidden) .modal-panel {
    animation: modal-panel-in .2s ease-out;
}

@keyframes modal-panel-in {
    from { opacity: 0; transform: scale(0.96); }
      to { opacity: 1; transform: scale(1); }
}
