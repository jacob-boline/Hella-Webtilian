{# hr_common/templates/hr_common/_form_field.html #}
{# hr_common/templates/_form_field.html#}

{% load form_fields %}


<div class="{{ wrapper_classes }} field-row--{{ state|default:'neutral' }}">
    <div class="{{ group_classes }}
        {% if state == 'error' %} field-group--error{% endif %}
        {% if state == 'valid' %} field-group--valid{% endif %}">

        {% if debug_error %}
            <!-- {{ debug_error }} -->
        {% endif %}

        {# LABEL #}
        <label for="{{ field_id }}">
            {{ label }}
            {% if required %}
                <span class="required-star">*</span>
            {% endif %}
        </label>

        {# INPUT ELEMENT WITH ARIA ATTRS #}
        {{ rendered_field|safe }}

        {# HELP TEXT (from Django field or manual override) #}
        {% if help %}
            <div id="{{ help_id }}" class="field-help">
                {{ help }}
            </div>
        {% endif %}

        {# ERRORS #}
        {% if has_errors %}
            <div id="{{ error_id }}" class="field-error">
                {% for error in field.errors %}
                    <span>{{ error }}</span>
                {% endfor %}
            </div>
        {% endif %}

    </div>
</div>
