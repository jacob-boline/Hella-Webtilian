{# hr_site/templates/hr_site/index.html #}

{% extends "hr_site/base.html" %}
{% load static %}

{% block title %}Hella Reptilian â€” Home{% endblock %}

{% block content %}

    <div id="section-wipe-0" class="section-wipe z-20 absolute"></div>

    <section id="parallax-section-shows" class="parallax-section relative flex items-center justify-center min-h-vhfix">
        <div class="parallax-background absolute inset-0 bg-cover bg-center"></div>
        <div class="parallax-content relative isolate z-10 mx-auto max-w-6xl px-5 py-vh-18 text-center flex flex-col items-center justify-center min-h-vhfix bg-transparent">
            <h1>Upcoming Shows</h1>

            {% if shows %}
                {% for show in shows %}
                    {% include "hr_live/_concert_card.html" with show=show %}
                {% endfor %}
            {% else %}
                <p class="opacity-70 italic">
                    No upcoming shows at the moment. Check back soon!
                </p>
            {% endif %}
        </div>
    </section>

    <div id="section-wipe-1" class="section-wipe z-20 absolute"></div>

    <section id="parallax-section-merch" class="parallax-section relative flex items-center justify-center min-h-vhfix">
        <div class="parallax-background absolute inset-0 bg-cover bg-center"></div>
        <div class="parallax-content relative isolate z-10 mx-auto max-w-6xl px-5 py-vh-18 text-center flex flex-col items-center justify-center min-h-vhfix bg-transparent">
            <h1>Merch</h1>

            <div id="merch-grid" class="merch-grid">
                {% for product in products %}
                    <article class="merch-card" data-product-slug="{{ product.slug }}">
                        <button class="merch-img"
                                aria-label="Open details for {{ product.name }}"

                                hx-get="{% url "hr_shop:get_product_modal_partial" product_slug=product.slug %}"
                                hx-target="#modal-content"
                                hx-swap="innerHTML"
                                hx-on::after-request="document.getElementById('modal').classList.remove('hidden');
                                                      document.getElementById('modal').setAttribute('aria-hidden', 'false');">
                            {% if product.image %}
                                <img src="{{ product.image.url }}" alt="{{ product.name }}">
                            {% else %}
                                <img src="{{ MEDIA_URL }}hr_shop/poster-neon_pastel.png" alt="{{ product.name }}">
                            {% endif %}
                        </button>

                        <div class="merch-meta">
                            <h3 class="merch-title">{{ product.name }}</h3>
                            <div class="merch-price">
                                {% if product.min_variant_price %}
                                    From ${{ product.min_variant_price }}
                                {% else %}
                                    Price TBD
                                {% endif %}
                            </div>
                        </div>

                        <div class="merch-actions">
                            <button class="card-btn outline"
                                    hx-get="{% url "hr_shop:get_product_modal_partial" product_slug=product.slug  %}"
                                    hx-target="#modal-content"
                                    hx-swap="innerHTML"
                                    hx-on::after-request="document.getElementById('modal').classList.remove('hidden');
                                                          document.getElementById('modal').setAttribute('aria-hidden', 'false');">
                                <i class="fas fa-circle-info"></i> Details
                            </button>
                        </div>
                    </article>
                {% empty %}
                    <p>No merch available yet. Check back soon.</p>
                {% endfor %}
            </div>

        </div>
    </section>

    <div id="section-wipe-2" class="section-wipe z-20 absolute"></div>

    <section id="parallax-section-about" class="parallax-section relative flex items-center justify-center min-h-vhfix">
        <div class="parallax-background absolute inset-0 bg-cover bg-center"></div>

        <div class="parallax-content relative isolate z-10 mx-auto max-w-6xl px-5 py-vh-18 text-center flex flex-col items-center justify-center min-h-vhfix bg-transparent">
            <h1>About</h1>
            <div class="about-card">
                <div class="about">
                    <div class="about-intro">
                        <p>
                            Not too long ago, in a place pretty close by, Animals as Leaders and Mastadon had united in
                            getting absolutely annihilated. Though many
                            There is none who can clearly answer any of the great 'W' questions, but from this was born
                            a
                            love-child,
                            known by the name of Hella Reptilian!
                        </p>
                    </div>
                    <div id="about-carousel-container">
                        {% include "hr_about/_about_carousel.html" with slides=slides %}
                    </div>
                </div>
            </div>

            <div class="about-quote-wrap">
                <div class="about-fade-bridge" aria-hidden="true"></div>
                <div id="about-quotes-container">
                    {% include "hr_about/_about_quotes.html" with quotes=quotes %}
                </div>
            </div>

        </div>
    </section>

    <div id="section-wipe-3" class="section-wipe z-20 absolute"></div>

    <section id="parallax-section-bulletin"
             class="parallax-section relative flex items-center justify-center min-h-vhfix">
        <div class="parallax-background absolute inset-0 bg-cover bg-center"></div>
        <div class="parallax-content relative isolate z-10 mx-auto px-0 py-vh-18 text-center flex flex-col items-center justify-center min-h-vhfix bg-transparent">
            <h1>Bulletin</h1>
            <div id="bulletin-root"
                 class="bulletin-root"
                 hx-get="{% url 'hr_bulletin:bulletin_list_partial' %}"
                 hx-trigger="load"
                 hx-target="#bulletin-root"
                 hx-swap="innerHTML">
                <p class="bulletin-loading">Loading posts...</p>
            </div>
        </div>
    </section>

{% endblock content %}

{% block extra_scripts %}{% endblock extra_scripts %}
