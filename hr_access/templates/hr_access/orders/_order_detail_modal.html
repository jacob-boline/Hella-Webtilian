<div class="checkout-review-modal order-detail-modal modal-content">
    <div class="modal-scroll">
        <h2 class="review-title">Order #{{ order.id }}</h2>

    <!-- =========================
         Order summary
         ========================= -->
    <div class="review-section">
        <h3 class="review-section-title">Summary</h3>

        <div class="shipping-summary">
            <div class="shipping-block">
                {% if order.created_at %}
                    <p class="customer-field">
                        <strong>Placed</strong><br>
                        {{ order.created_at|date:"M j, Y Â· g:ia" }}
                    </p>
                {% endif %}

                {% if order.status %}
                    <p class="customer-field">
                        <strong>Status</strong><br>
                        {{ order.status }}
                    </p>
                {% endif %}
            </div>

            <div class="shipping-contact">
                {% if order.email %}
                    <p class="customer-field">
                        <strong>Email</strong><br>
                        {{ order.email }}
                    </p>
                {% endif %}

                {% if order.phone %}
                    <p class="customer-field">
                        <strong>Phone</strong><br>
                        {{ order.phone }}
                    </p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- =========================
         Shipping address
         ========================= -->
    {% if order.shipping_address %}
        <div class="review-section shipping-review">
            <h3 class="review-section-title">Shipping</h3>

            <div class="shipping-summary">
                <div class="shipping-block">
                    <p class="customer-name customer-field">
                        {{ order.customer.full_name }}
                    </p>

                    <p class="shipping-address customer-field">
                        {{ order.shipping_address.formatted|linebreaksbr }}
                    </p>

                    {% if order.shipping_address.building_type %}
                        <p class="customer-field faint">
                            {{ order.shipping_address.get_building_type_display }}
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}

    <!-- =========================
         Items
         ========================= -->
    <div class="review-section">
        <h3 class="review-section-title">Items</h3>

        <div class="review-items">
            {% for item in order.items.all %}
                <div class="review-item">
                    <div class="item-info">
                        <span class="item-name">
                            {{ item.variant.product.name }}
                        </span>

                        <div class="item-meta">
                            {% if item.variant.name %}
                                <span class="item-variant">{{ item.variant.name }}</span>
                            {% endif %}
                            <span class="item-qty">Qty: {{ item.quantity }}</span>
                        </div>
                    </div>

                    <span class="item-price">
                        ${{ item.unit_price|floatformat:2 }}
                    </span>
                </div>
            {% empty %}
                <p class="checkout-message">No items found for this order.</p>
            {% endfor %}
        </div>
    </div>

    <!-- =========================
         Totals
         ========================= -->
    <div class="review-section review-totals">
        <div class="total-row">
            <span>Subtotal</span>
            <span>${{ order.subtotal|floatformat:2 }}</span>
        </div>

        {% if order.tax %}
            <div class="total-row">
                <span>Tax</span>
                <span>${{ order.tax|floatformat:2 }}</span>
            </div>
        {% endif %}

        {% if order.shipping %}
            <div class="total-row">
                <span>Shipping</span>
                <span>${{ order.shipping|floatformat:2 }}</span>
            </div>
        {% endif %}

        <div class="total-row total-final">
            <span>Total</span>
            <span>${{ order.total|floatformat:2 }}</span>
        </div>
    </div>

    <!-- =========================
         Notes
         ========================= -->
    {% if order.note %}
        <div class="review-section">
            <h3 class="review-section-title">Special Instructions</h3>
            <p class="review-note">{{ order.note }}</p>
        </div>
    {% endif %}

    <!-- =========================
         Actions
         ========================= -->
        <div class="review-actions modal-actions stack grid grid-cols-1 grid-cols-2-1200">
            <button
                type="button"
                class="card-btn btn-neon btn-blue"
                hx-get="{% url 'hr_access:account_get_orders' %}"
                hx-target="#modal-content"
                hx-swap="innerHTML transition:true"
            >
                Back to Orders
            </button>

            <button type="button" class="card-btn btn-neon btn-blue" data-modal-close>
                Close
            </button>
        </div>
    </div>
</div>
