{# hr_access/templates/hr_access/orders/orders_page.html #}

{% extends "hr_common/base.html" %}

{% block content %}
<div class="max-w-3xl mx-auto py-8 px-4">
    <h1 class="text-2xl font-bold mb-4">My Orders</h1>

    {% if orders %}
        <div class="space-y-4">
            {% for order in orders %}
                <article class="order-card border border-gray-700 rounded-lg p-4 text-left">
                    <header class="flex justify-between items-center mb-2">
                        <h2 class="font-semibold">
                            Order #{{ order.id }}
                        </h2>
                        <span class="text-xs opacity-75">
                            {{ order.created_at|date:"M j, Y H:i" }}
                        </span>
                    </header>

                    <p class="text-sm mb-1">
                        Status:
                        <span class="font-medium">
                            {{ order.get_status_display|default:order.status }}
                        </span>
                    </p>

                    <p class="text-sm mb-1">
                        Total:
                        <span class="font-semibold">{{ order.total }}</span>
                    </p>

                    {% if order.shipping_address %}
                        <p class="text-xs opacity-80 mb-2">
                            Shipping to: {{ order.shipping_address }}
                        </p>
                    {% endif %}

                    {% if order.items.all %}
                        <h3 class="text-sm font-semibold mt-2 mb-1">Items</h3>
                        <ul class="text-sm list-disc list-inside space-y-1">
                            {% for item in order.items.all %}
                                <li>
                                    {{ item.quantity }} × {{ item.variant }}
                                    {% if item.unit_price %}
                                        — {{ item.unit_price }}
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </article>
            {% endfor %}
        </div>

        {% if has_more %}
            <p class="mt-4 text-sm opacity-75">
                Showing your 20 most recent orders.
            </p>
        {% endif %}
    {% else %}
        <p>You don’t have any orders yet.</p>
    {% endif %}
</div>
{% endblock %}
