{# hr_access/templates/hr_access/orders/_orders_modal_body.html #}

<article class="orders-modal account-orders-modal m-shell">
    <header class="m-head">
        <h2 class="sub-header modal-title">My Orders</h2>
    </header>

    <section class="m-body">
        {% if unclaimed_count %}
            <p class="orders-unclaimed-note">
                <button type="button"
                        class="orders-unclaimed-link text-center"
                        hx-get="{% url 'hr_access:account_get_unclaimed_orders' %}"
                        hx-target="#modal-content"
                        hx-swap="innerHTML transition:true">
                    Click here to view the unclaimed orders associated with this email.
                </button>
            </p>
        {% endif %}

        {% if orders %}
            <div class="orders-list">
                {% for order in orders %}
                    <article class="orders-summary-card">
                        <div class="orders-main">
                            <p class="orders-title">
                                Order #{{ order.id }}
                            </p>

                            <div class="orders-meta">
                                <span>{{ order.created_at|date:"M j, Y · g:i A" }}</span>
                                <span class="orders-status">{{ order.payment_status }}</span>
                                <span class="orders-status">{{ order.order_status }}</span>
                            </div>

                            {% if order.shipping_address %}
                                <p class="text-faint">
                                    Shipping Address: {{ order.shipping_address }}
                                </p>
                            {% endif %}
                        </div>

                        <div class="orders-actions">
                            <p class="orders-total">${{ order.total|floatformat:2 }}</p>

                            <button type="button"
                                    class="card-btn btn-neon btn-blue btn-sm"
                                    hx-get="{% url 'hr_access:account_get_order_receipt' order.id %}"
                                    hx-target="#modal-content"
                                    hx-swap="innerHTML transition:true">
                                View
                            </button>
                        </div>
                    </article>
                {% endfor %}
            </div>

            {% if has_more %}
                <p class="text-faint text-center mt-3">
                    Showing the 20 most recent orders.
                </p>
            {% endif %}
        {% else %}
            <p class="orders-empty text-center">You don’t have any orders yet.</p>
        {% endif %}

    </section>

    <footer class="m-foot m-actions mt-3">
        <button type="button"
                class="card-btn btn-neon btn-blue btn-sm"
                data-modal-close>
            Close
        </button>
    </footer>
</article>
