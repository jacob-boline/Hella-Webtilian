{# hr_access/templates/_orders_modal_body.html #}

{# Partial: rendered into #modal-message-box via HTMX #}

<div class="modal-panel">
    <div class="modal-header flex items-center justify-between mb-3">
        <h2 class="text-xl font-semibold">My Orders</h2>
        <button type="button"
                class="modal-close-btn"
                onclick="document.getElementById('modal').classList.add('hidden')">
            ✕
        </button>
    </div>

    {% if orders %}
        <div class="modal-body space-y-4">
            {% for order in orders %}
                <article class="order-card border border-gray-700 rounded-lg p-3 text-left">
                    <header class="flex justify-between items-center mb-1">
                        <h3 class="font-semibold">
                            Order #{{ order.id }}
                        </h3>
                        <span class="text-xs opacity-75">
                            {{ order.created_at|date:"M j, Y H:i" }}
                        </span>
                    </header>

                    <p class="text-sm mb-1">
                        Status:
                        <span class="font-medium">
                            {{ order.get_status_display|default:order.status }}
                        </span>
                    </p>

                    <p class="text-sm mb-1">
                        Total:
                        <span class="font-semibold">
                            {{ order.total }}
                        </span>
                    </p>

                    {% if order.shipping_address %}
                        <p class="text-xs opacity-80">
                            Shipping to: {{ order.shipping_address }}
                        </p>
                    {% endif %}

                    {% if order.items.all %}
                        <ul class="mt-2 text-sm list-disc list-inside space-y-1">
                            {% for item in order.items.all %}
                                <li>
                                    {{ item.quantity }} × {{ item.variant }}
                                    {% if item.unit_price %}
                                        — {{ item.unit_price }}
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </article>
            {% endfor %}
        </div>

        {% if has_more %}
            <div class="mt-3 text-sm opacity-75">
                Showing the 20 most recent orders.
            </div>
        {% endif %}
    {% else %}
        <div class="modal-body">
            <p>You don’t have any orders yet.</p>
        </div>
    {% endif %}

    <div class="modal-footer mt-4 text-right">
        <button type="button"
                class="card-button outline"
                onclick="document.getElementById('modal').classList.add('hidden')">
            Close
        </button>
    </div>
</div>
